<!DOCTYPE html>
<html>
<head>
    <title>Manage Hero Section</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background: #f8f9fa; padding: 20px; }
        .hero-preview { background: #1a1a2e; color: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .form-container { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="mb-4">Manage Hero Section</h1>
        
        <!-- Hero Preview -->
        <div class="hero-preview mb-4">
            <h2 id="preview-title">Loading...</h2>
            <p id="preview-subtitle"></p>
            <div id="preview-features"></div>
            <div id="preview-cta"></div>
        </div>
        
        <!-- Edit Form -->
        <div class="form-container">
            <form id="hero-form">
                <h3>Edit Hero Content</h3>
                
                <div class="mb-3">
                    <label>Badge Text</label>
                    <input type="text" class="form-control" id="badge-text" placeholder="Limited Time Offer">
                </div>
                
                <div class="row mb-3">
                    <div class="col">
                        <label>Title Part 1</label>
                        <input type="text" class="form-control" id="title-part1" placeholder="Illuminate">
                    </div>
                    <div class="col">
                        <label>Title Part 2</label>
                        <input type="text" class="form-control" id="title-part2" placeholder="Your Holidays">
                    </div>
                </div>
                
                <div class="mb-3">
                    <label>Subtitle</label>
                    <textarea class="form-control" id="subtitle" rows="2" placeholder="Premium Christmas Lighting..."></textarea>
                </div>
                
                <div class="mb-3">
                    <label>Features (one per line)</label>
                    <textarea class="form-control" id="features" rows="4" placeholder="Professional Installation
Energy Efficient
Custom Design
Free Estimates"></textarea>
                </div>
                
                <div class="row mb-3">
                    <div class="col">
                        <label>CTA Subtext</label>
                        <input type="text" class="form-control" id="cta-subtext" placeholder="Call Now for Free Quote">
                    </div>
                    <div class="col">
                        <label>Phone Number</label>
                        <input type="text" class="form-control" id="cta-phone" placeholder="(123) 456-7890">
                    </div>
                </div>
                <!-- Add this after the phone number fields -->
<hr class="my-4">

<!-- Background Image Upload -->
<div class="mb-4">
    <h4>Background Image</h4>
    
    <!-- Current Image Preview -->
    <div class="mb-3">
        <label class="form-label">Current Background Image:</label>
        <div id="current-bg-preview" class="border p-2 rounded text-center">
            <img id="bg-preview-img" src="" alt="Background preview" class="img-fluid mb-2" style="max-height: 150px;">
            <div id="bg-preview-url" class="text-muted small"></div>
        </div>
    </div>
    
    <!-- Image URL Input -->
    <div class="mb-3">
        <label for="background-url" class="form-label">Image URL</label>
        <input type="text" class="form-control" id="background-url" 
               placeholder="/images/hero-background.jpg">
        <div class="form-text">Enter full URL or path to image</div>
    </div>
    
    <!-- Alt Text -->
    <div class="mb-3">
        <label for="background-alt" class="form-label">Alt Text</label>
        <input type="text" class="form-control" id="background-alt" 
               placeholder="Christmas Lights Background">
    </div>
</div>

<hr class="my-4">

<!-- Side Image Upload -->
<div class="mb-4">
    <h4>Side Image (Right Image)</h4>
    
    <!-- Current Image Preview -->
    <div class="mb-3">
        <label class="form-label">Current Side Image:</label>
        <div id="current-side-preview" class="border p-2 rounded text-center">
            <img id="side-preview-img" src="" alt="Side image preview" class="img-fluid mb-2" style="max-height: 150px;">
            <div id="side-preview-url" class="text-muted small"></div>
        </div>
    </div>
    
    <!-- Image URL Input -->
    <div class="mb-3">
        <label for="sideimage-url" class="form-label">Image URL</label>
        <input type="text" class="form-control" id="sideimage-url" 
               placeholder="/images/rightimage.jpg">
        <div class="form-text">Enter full URL or path to image</div>
    </div>
    
    <!-- Alt Text -->
    <div class="mb-3">
        <label for="sideimage-alt" class="form-label">Alt Text</label>
        <input type="text" class="form-control" id="sideimage-alt" 
               placeholder="Beautiful Christmas Tree with professional holiday lighting">
    </div>
</div>

<hr class="my-4">

<!-- Image Badge -->
<div class="mb-3">
    <label for="image-badge" class="form-label">Image Badge Text</label>
    <input type="text" class="form-control" id="image-badge" 
           placeholder="Our Premium Work">
</div>
                
                <button type="submit" class="btn btn-primary">Save Changes</button>
            </form>
        </div>
    </div>
    
    <script>
       // Load current hero data
async function loadHero() {
    try {
        const response = await fetch('/api/hero');
        const hero = await response.json();
        
        // Fill form
        document.getElementById('badge-text').value = hero.badge?.text || '';
        document.getElementById('title-part1').value = hero.title?.part1 || '';
        document.getElementById('title-part2').value = hero.title?.part2 || '';
        document.getElementById('subtitle').value = hero.subtitle || '';
        document.getElementById('features').value = hero.features?.join('\n') || '';
        document.getElementById('cta-subtext').value = hero.cta?.subtext || '';
        document.getElementById('cta-phone').value = hero.cta?.phone || '';
        
        // Fill image fields
        document.getElementById('background-url').value = hero.backgroundImage?.url || '';
        document.getElementById('background-alt').value = hero.backgroundImage?.alt || '';
        document.getElementById('sideimage-url').value = hero.sideImage?.url || '';
        document.getElementById('sideimage-alt').value = hero.sideImage?.alt || '';
        document.getElementById('image-badge').value = hero.imageBadge || '';
        
        // Update image previews
        updateImagePreview('bg', hero.backgroundImage?.url);
        updateImagePreview('side', hero.sideImage?.url);
        
        // Update preview
        updatePreview(hero);
    } catch (error) {
        alert('Error loading hero data: ' + error.message);
    }
}

// Update image preview
function updateImagePreview(type, url) {
    const imgElement = document.getElementById(`${type}-preview-img`);
    const urlElement = document.getElementById(`${type}-preview-url`);
    const container = document.getElementById(`current-${type}-preview`);
    
    if (url) {
        imgElement.src = url;
        imgElement.style.display = 'block';
        urlElement.textContent = url;
        container.style.display = 'block';
    } else {
        imgElement.style.display = 'none';
        urlElement.textContent = 'No image set';
    }
}
        // Update preview
        function updatePreview(hero) {
            document.getElementById('preview-title').textContent = 
                (hero.title?.part1 || '') + ' ' + (hero.title?.part2 || '');
            document.getElementById('preview-subtitle').textContent = hero.subtitle || '';
            
            // Features
            const featuresDiv = document.getElementById('preview-features');
            featuresDiv.innerHTML = '<h5>Features:</h5>';
            if (hero.features && hero.features.length > 0) {
                featuresDiv.innerHTML += '<ul>' + 
                    hero.features.map(f => `<li>${f}</li>`).join('') + 
                    '</ul>';
            }
            
            // CTA
            document.getElementById('preview-cta').innerHTML = 
                `<h5>Call to Action:</h5>
                 <p>${hero.cta?.subtext || ''}</p>
                 <strong>${hero.cta?.phone || ''}</strong>`;
        }
        
        // Save hero
       // Save hero
async function saveHero(e) {
    e.preventDefault();
    
    const heroData = {
        badge: {
            text: document.getElementById('badge-text').value
        },
        title: {
            part1: document.getElementById('title-part1').value,
            part2: document.getElementById('title-part2').value
        },
        subtitle: document.getElementById('subtitle').value,
        features: document.getElementById('features').value.split('\n').filter(f => f.trim()),
        cta: {
            subtext: document.getElementById('cta-subtext').value,
            phone: document.getElementById('cta-phone').value
        },
        // Add image data
        backgroundImage: {
            url: document.getElementById('background-url').value,
            alt: document.getElementById('background-alt').value
        },
        sideImage: {
            url: document.getElementById('sideimage-url').value,
            alt: document.getElementById('sideimage-alt').value
        },
        imageBadge: document.getElementById('image-badge').value
    };
    
    // ... rest of your saveHero function ...
}
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadHero();
            document.getElementById('hero-form').addEventListener('submit', saveHero);
        });
    </script>
</body>
</html>